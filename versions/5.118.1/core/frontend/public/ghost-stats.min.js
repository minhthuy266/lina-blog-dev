"use strict";(()=>{var g,_=new Uint8Array(16);function b(){if(!g&&(g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(_)}var o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function M(e,a=0){return o[e[a+0]]+o[e[a+1]]+o[e[a+2]]+o[e[a+3]]+"-"+o[e[a+4]]+o[e[a+5]]+"-"+o[e[a+6]]+o[e[a+7]]+"-"+o[e[a+8]]+o[e[a+9]]+"-"+o[e[a+10]]+o[e[a+11]]+o[e[a+12]]+o[e[a+13]]+o[e[a+14]]+o[e[a+15]]}var U=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f={randomUUID:U};function D(e,a,r){if(f.randomUUID&&!a&&!e)return f.randomUUID();e=e||{};let t=e.random||(e.rng||b)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,a){r=r||0;for(let n=0;n<16;++n)a[r+n]=t[n];return a}return M(t)}var d=D;var S=[{name:"Pacific/Pago_Pago",label:"(GMT -11:00) Midway Island, Samoa"},{name:"Pacific/Honolulu",label:"(GMT -10:00) Hawaii"},{name:"America/Anchorage",label:"(GMT -9:00) Alaska"},{name:"America/Tijuana",label:"(GMT -8:00) Chihuahua, La Paz, Mazatlan"},{name:"America/Los_Angeles",label:"(GMT -8:00) Pacific Time (US & Canada); Tijuana"},{name:"America/Phoenix",label:"(GMT -7:00) Arizona"},{name:"America/Denver",label:"(GMT -7:00) Mountain Time (US & Canada)"},{name:"America/Costa_Rica",label:"(GMT -6:00) Central America"},{name:"America/Chicago",label:"(GMT -6:00) Central Time (US & Canada)"},{name:"America/Mexico_City",label:"(GMT -6:00) Guadalajara, Mexico City, Monterrey"},{name:"America/Regina",label:"(GMT -6:00) Saskatchewan"},{name:"America/Bogota",label:"(GMT -5:00) Bogota, Lima, Quito"},{name:"America/New_York",label:"(GMT -5:00) Eastern Time (US & Canada)"},{name:"America/Fort_Wayne",label:"(GMT -5:00) Indiana (East)"},{name:"America/Caracas",label:"(GMT -4:00) Caracas, La Paz"},{name:"America/Halifax",label:"(GMT -4:00) Atlantic Time (Canada); Greenland"},{name:"America/Santiago",label:"(GMT -4:00) Santiago"},{name:"America/St_Johns",label:"(GMT -3:30) Newfoundland"},{name:"America/Argentina/Buenos_Aires",label:"(GMT -3:00) Buenos Aires, Brasilia, Georgetown"},{name:"America/Noronha",label:"(GMT -2:00) Fernando de Noronha"},{name:"Atlantic/Azores",label:"(GMT -1:00) Azores"},{name:"Atlantic/Cape_Verde",label:"(GMT -1:00) Cape Verde Is."},{name:"Etc/UTC",label:"(GMT) UTC"},{name:"Africa/Casablanca",label:"(GMT +0:00) Casablanca, Monrovia"},{name:"Europe/Dublin",label:"(GMT +0:00) Dublin, Edinburgh, London"},{name:"Europe/Amsterdam",label:"(GMT +1:00) Amsterdam, Berlin, Rome, Stockholm, Vienna"},{name:"Europe/Prague",label:"(GMT +1:00) Belgrade, Bratislava, Budapest, Prague"},{name:"Europe/Paris",label:"(GMT +1:00) Brussels, Copenhagen, Madrid, Paris"},{name:"Europe/Warsaw",label:"(GMT +1:00) Sarajevo, Skopje, Warsaw, Zagreb"},{name:"Africa/Lagos",label:"(GMT +1:00) West Central Africa"},{name:"Europe/Athens",label:"(GMT +2:00) Athens, Beirut, Bucharest"},{name:"Africa/Cairo",label:"(GMT +2:00) Cairo, Egypt"},{name:"Africa/Maputo",label:"(GMT +2:00) Harare"},{name:"Europe/Kiev",label:"(GMT +2:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius"},{name:"Asia/Jerusalem",label:"(GMT +2:00) Jerusalem"},{name:"Africa/Johannesburg",label:"(GMT +2:00) Pretoria"},{name:"Asia/Baghdad",label:"(GMT +3:00) Baghdad"},{name:"Asia/Riyadh",label:"(GMT +3:00) Kuwait, Nairobi, Riyadh"},{name:"Europe/Istanbul",label:"(GMT +3:00) Istanbul, Ankara"},{name:"Europe/Moscow",label:"(GMT +3:00) Moscow, St. Petersburg, Volgograd"},{name:"Asia/Tehran",label:"(GMT +3:30) Tehran"},{name:"Asia/Dubai",label:"(GMT +4:00) Abu Dhabi, Muscat"},{name:"Asia/Baku",label:"(GMT +4:00) Baku, Tbilisi, Yerevan"},{name:"Asia/Kabul",label:"(GMT +4:30) Kabul"},{name:"Asia/Karachi",label:"(GMT +5:00) Islamabad, Karachi, Tashkent"},{name:"Asia/Yekaterinburg",label:"(GMT +5:00) Yekaterinburg"},{name:"Asia/Kolkata",label:"(GMT +5:30) Chennai, Calcutta, Mumbai, New Delhi"},{name:"Asia/Kathmandu",label:"(GMT +5:45) Katmandu"},{name:"Asia/Almaty",label:"(GMT +6:00) Almaty, Novosibirsk"},{name:"Asia/Dhaka",label:"(GMT +6:00) Astana, Dhaka, Sri Jayawardenepura"},{name:"Asia/Rangoon",label:"(GMT +6:30) Rangoon"},{name:"Asia/Bangkok",label:"(GMT +7:00) Bangkok, Hanoi, Jakarta"},{name:"Asia/Krasnoyarsk",label:"(GMT +7:00) Krasnoyarsk"},{name:"Asia/Hong_Kong",label:"(GMT +8:00) Beijing, Chongqing, Hong Kong, Urumqi"},{name:"Asia/Irkutsk",label:"(GMT +8:00) Irkutsk, Ulaan Bataar"},{name:"Asia/Singapore",label:"(GMT +8:00) Kuala Lumpur, Perth, Singapore, Taipei"},{name:"Asia/Tokyo",label:"(GMT +9:00) Osaka, Sapporo, Tokyo"},{name:"Asia/Seoul",label:"(GMT +9:00) Seoul"},{name:"Asia/Yakutsk",label:"(GMT +9:00) Yakutsk"},{name:"Australia/Adelaide",label:"(GMT +9:30) Adelaide"},{name:"Australia/Darwin",label:"(GMT +9:30) Darwin"},{name:"Australia/Brisbane",label:"(GMT +10:00) Brisbane, Guam, Port Moresby"},{name:"Australia/Sydney",label:"(GMT +10:00) Canberra, Hobart, Melbourne, Sydney, Vladivostok"},{name:"Asia/Magadan",label:"(GMT +11:00) Magadan, Soloman Is., New Caledonia"},{name:"Pacific/Auckland",label:"(GMT +12:00) Auckland, Wellington"},{name:"Pacific/Fiji",label:"(GMT +12:00) Fiji, Kamchatka, Marshall Is."},{name:"Pacific/Kwajalein",label:"(GMT +12:00) International Date Line West"}];function R(e){let a=new URL(e||window.location.href),r=a.searchParams.get("ref"),t=a.searchParams.get("source"),n=a.searchParams.get("utm_source"),l=a.searchParams.get("utm_medium"),u=r||t||n||null;return!u&&a.hash&&a.hash.includes("#/portal")?B(a):{source:u,medium:l||null,url:window.document.referrer||null}}function B(e){let a=new URL(e.href.replace("/#/portal","")),r=a.searchParams.get("ref"),t=a.searchParams.get("source"),n=a.searchParams.get("utm_source"),l=a.searchParams.get("utm_medium");return{source:r||t||n||null,medium:l||null,url:window.document.referrer||null}}function L(e){let{source:a,medium:r,url:t}=e,n=a||r||t||null;if(n)try{let l=new URL(n).hostname,u=window.location.hostname;if(l===u)return null}catch{return n}return n}function y(e){let a=R(e);return L(a)}function h(e,a){let r=a.getItem(e);if(!r)return null;let t=null;try{t=JSON.parse(r)}catch{return null}return typeof t!="object"||t===null?null:new Date().getTime()>t.expiry?(a.removeItem(e),null):t.value}function w(e,a,r=4){let t=h(e,a)||d(),l={value:t,expiry:new Date().getTime()+r*3600*1e3};return a.setItem(e,JSON.stringify(l)),t}function T(e){return e==="localStorage"?localStorage:sessionStorage}var K=["username","user","user_id","userid","password","pass","pin","passcode","token","api_token","email","address","phone","sex","gender","order","order_id","orderid","payment","credit_card"];function G(e,a=K){let r=JSON.stringify(e);return a.forEach(t=>{r=r.replace(new RegExp(`("${t}"):(".+?"|\\d+)`,"mgi"),'$1:"********"')}),r}function k(e,a={},r=!0){if(r){let t=G(e),n=Object.assign({},JSON.parse(t),a);return JSON.stringify(n)}else{let t=Object.assign({},e,a),n=G(t);return JSON.parse(n)}}(function(){let e="session-id",t={host:null,token:null,domain:null,datasource:"analytics_events",storageMethod:{localStorage:"localStorage",sessionStorage:"sessionStorage"}.localStorage,stringifyPayload:!0,globalAttributes:{}},n=!!(typeof window<"u"&&(window.__nightmare||window.navigator.webdriver||window.Cypress));function l(){if(!document.currentScript)return!1;t.host=document.currentScript.getAttribute("data-host"),t.token=document.currentScript.getAttribute("data-token"),t.domain=document.currentScript.getAttribute("data-domain"),t.datasource=document.currentScript.getAttribute("data-datasource")||t.datasource,t.storageMethod=document.currentScript.getAttribute("data-storage")||t.storageMethod,t.stringifyPayload=document.currentScript.getAttribute("data-stringify-payload")!=="false";for(let i of document.currentScript.attributes)i.name.startsWith("tb_")&&(t.globalAttributes[i.name.slice(3)]=i.value);return!!(t.host&&t.token)}async function u(i,s){try{if(!t.host||!t.token)throw new Error("Missing required configuration (host or token)");w(e,T(t.storageMethod));let c=`${t.host}?name=${encodeURIComponent(t.datasource)}&token=${encodeURIComponent(t.token)}`,x=k(s,t.globalAttributes,t.stringifyPayload),C=h(e,T(t.storageMethod))||d(),I={timestamp:new Date().toISOString(),action:i,version:"1",session_id:C,payload:x},A=new AbortController,E=setTimeout(()=>A.abort(),5e3),p=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I),signal:A.signal});if(clearTimeout(E),!p.ok)throw new Error(`HTTP error! Status: ${p.status}`);return p}catch(c){return(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.error("Ghost Stats error:",c),null}}function v(){try{let i=Intl.DateTimeFormat().resolvedOptions().timeZone,s=i?S[i]:null,c=navigator.languages?.[0]||navigator.language||"en";return{country:s,locale:c}}catch{return{country:null,locale:"en"}}}function m(){if(n)return;let{country:i,locale:s}=v();setTimeout(()=>{u("page_hit",{"user-agent":window.navigator.userAgent,locale:s,location:i,referrer:y(),pathname:window.location.pathname,href:window.location.href})},300)}function P(){if(n)return!1;if(!l())return console.warn("Ghost Stats: Missing required configuration"),!1;window.Tinybird={trackEvent:u,_trackPageHit:m},window.addEventListener("hashchange",m);let s=window.history.pushState;return s&&(window.history.pushState=function(){s.apply(this,arguments),m()},window.addEventListener("popstate",m)),document.visibilityState!=="hidden"?m():document.addEventListener("visibilitychange",function c(){document.visibilityState==="visible"&&(m(),document.removeEventListener("visibilitychange",c))}),!0}P()})();})();
